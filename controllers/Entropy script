import csv
results = []
print "\nPlease enter the complete file location of a csv file of the results you want to calculate the entropy of."
filelocation = raw_input("File Location: ")
with open(filelocation, "rb") as csvfile:
    resultsreader = csv.reader(csvfile, delimiter=',', quotechar='|')
    for row in resultsreader:
        results.append(row)
csvfile.close()
Ngram_prefix = raw_input('What Ngram prefix are you looking for?: ')
print "\n" + "How many times does"
print Ngram_prefix
Prefixoccurrences = int(raw_input('happen?: '))

Prefixlength = len(Ngram_prefix)
Ngramswithprefix = []
for r in results:
    if Ngram_prefix == r[0][0:Prefixlength]:
        # The next line populates a list with 2-tuples of each Ngram in the file that has the user's prefix along with /
        # its number of occurences.
        Ngramswithprefix.append((r[0].split(":", 1)[0], int(r[1])))
print "What log base would you like to use?  If you don't know, enter the number 2. For base e, type the letter e."
Logbase = float(raw_input("Log base: "))

import math
entlist = []
for x in Ngramswithprefix:
    entlist.append((float(x[1])/Prefixoccurrences)*math.log(float(x[1])/Prefixoccurrences, Logbase))
Prefixentropy = sum(entlist)
print "\n" + "The entropy of the prefix " + Ngram_prefix + " is " + str(-Prefixentropy) + ".\n"

Yesses = ['y', 'Y', 'yes', 'YES']
calcprob = raw_input("Show the probability that each Ngram will happen after the given prefix? (y/n): ")
if calcprob in Yesses:
    for x in Ngramswithprefix:
        print str(x[0]) + ": " + str(round(x[1]/float(Prefixoccurrences)*100, 2)) + "%"